<!-- <script src="js/jquery.min.js"></script> -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> -->
<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"
></script>
<script src="js/popper.min.js"></script>
<script src="js/getFormData.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/js/all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-toast-plugin@1.3.2/dist/jquery.toast.min.js"></script>
<script>
  $(".js-states").select2({
    // minimumResultsForSearch: -1
    // placeholder: "Select a programming language",
    // allowClear: true
  });
</script>
<script>
  $(".toggle-nav").click(function () {
    // alert('done');
    $this = $(this);
    $nav = $(".nice-nav");
    $nav.toggleClass("open");

    $this = $(this);
    $nav = $(".right-side-block");
    $nav.toggleClass("open");
  });

  $(document).ready(function () {
    // Function to highlight the active menu item based on the current URL
    function setActiveMenu() {
      var currentPath = window.location.pathname.split("/").pop(); // Get the last part of the URL path

      // Reset all active states first
      $(".sidebar-menu li").removeClass("active");
      $(".sidebar-menu a").removeClass("active");

      // Special case for dashboard since it's the home page
      if (
        currentPath === "index" ||
        currentPath === "" ||
        currentPath === "dashboard"
      ) {
        $(".sidebar-menu a.home").parent().addClass("active");
        return;
      }

      // Loop through all menu items
      $(".sidebar-menu a").each(function () {
        var menuItemPath = $(this).attr("href").split("/").pop();

        // Check if the menu item's path matches the current path exactly
        if (currentPath === menuItemPath) {
          $(this).addClass("active");
          $(this).parent().addClass("active");

          // If the menu item is inside a submenu, open the submenu
          if ($(this).closest(".treeview-menu").length) {
            $(this).closest(".treeview-menu").slideDown(300);
            $(this).closest(".treeview").addClass("active");
          }
        }
      });
    }

    // Call the function to set the active menu item
    setActiveMenu();

    // Toggle submenu on click
    $(".sidebar-menu").on("click", ".treeview > a", function (e) {
      e.preventDefault();
      var $this = $(this);
      var $parent = $this.parent();
      var $submenu = $this.next(".treeview-menu");

      // Close other open submenus
      $parent.siblings().find(".treeview-menu").slideUp(300);
      $parent.siblings().removeClass("active");

      // Toggle the current submenu
      $submenu.slideToggle(300, function () {
        $parent.toggleClass("active", $submenu.is(":visible"));
      });
    });

    // Add active class to clicked submenu item
    $(".treeview-menu").on("click", "li", function () {
      $(this).addClass("active").siblings().removeClass("active");
    });
  });

  function show() {
    if ($(".password").attr("type") == "password") {
      $(".password").attr("type", "text");
      document.getElementById("s_show_hide").innerHTML =
        "<i class='fa-regular fa-eye'></i>";
    } else {
      $(".password").attr("type", "password");
      document.getElementById("s_show_hide").innerHTML =
        "<i class='fa-regular fa-eye-slash'></i>";
    }
  }

  var selectAllItems = "#MyTableCheckAllButton";
  var checkboxItem = ":checkbox";

  $(selectAllItems).click(function () {
    if (this.checked) {
      $(checkboxItem).each(function () {
        this.checked = true;
      });
    } else {
      $(checkboxItem).each(function () {
        this.checked = false;
      });
    }
  });

  $(".close_menu").click(function () {
    $(".nice-nav").removeClass("open");
  });

  function renderToast(objectAssign = {}) {
    $.toast({
      text: objectAssign.message ? objectAssign.message : "message",
      icon: objectAssign.icon ? objectAssign.icon : "info",
      loader: true, // Change it to false to disable loader
      loaderBg: "#9EC600", // To change the background
    });
  }
</script>

<script>
  document
    .querySelectorAll(".pagination-prev, .pagination-next")
    .forEach((btn) => {
      btn.addEventListener("click", function (e) {
        e.preventDefault();
        if (this.classList.contains("disabled")) return;

        const targetPage = parseInt(this.getAttribute("data-page"));
        if (targetPage < 1) return;

        document.getElementById("paginationPage").value = targetPage;
        document.getElementById("paginationForm").submit();
      });
    });

  window.addEventListener("DOMContentLoaded", () => {
    const url = new URL(window.location);
    url.searchParams.delete("page"); // remove page param
    url.searchParams.delete("pageSize"); // optional: remove other params
    history.replaceState(null, "", url.pathname + url.search);
  });
</script>
