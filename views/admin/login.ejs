<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LOGIN</title>
    <%- include('partials/linkheader.ejs') %>
  </head>
  <style>
  a#s_show_hide {
    position: absolute;
    top: 50%;
    transform: translateY(20%);
    right: 10px;
    font-size: 14px;
    z-index: 10;
    cursor: pointer;
}
  </style>
  <body>
    <div class="page-wrapper">
      <section class="login-wrapper vh-100">
        <div class="container-fluid h-100">
          <div class="row h-100 align-items-center justify-content-center">
          <div class="col-md-7 col-lg-7 px-0">
            <div class="login-left-img">
                <img src="images/loginBg.jpg" class="img-fluid w-100 h-100" alt="" style="object-fit:contain;"/>
            </div>
          </div>
            <div class="col-md-5 col-lg-5">
              <form action="" method="get" class="login-form">
                <!--<h3 class="text-center">Login</h3>-->
                <div class="logo">
                    <a href="#">
                        <img src="images/logo.png" class="img-fluid" alt="logo">
                    </a>
                </div>
                
                <h2 class="text-center">Welcome to EZDOORS</h2>
                <p class="text-center">“Today is your best Day”</p>                
                <div class="form-group mt-5">
                  <label for="">Email</label>
                  <input
                    type="email"
                    class="form-control"
                    placeholder="Email your address"
                  />
                </div>
                <div class="form-group position-relative my-4">
                  <label for="">Password</label>
                  <input id="password" name="password"
                    type="password"
                    class="form-control password"
                    placeholder="Enter your password"
                  />
                 <a id="s_show_hide" onclick="show();"><i class="fa-regular fa-eye-slash"></i></a>
                </div>
                
                <div class="d-flex align-items-center justify-content-between">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                      <label class="form-check-label" for="flexCheckDefault">
                        Remember me
                      </label>
                    </div>
                    
                    <a class="forgot_btn">Forgot password?</a>
                </div>
                
                <div class="text-center mt-5">
                  <button type="submit" class="btn btn-primary w-50 mx-auto">
                    Login
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>
    </div>
    <%- include('partials/linkfooter.ejs') %>

    <script>
      const form = $(".login-form");
      const loginHandler = (e) => {
        e.preventDefault();
        const email = $('input[type="email"]').val();
        const password = $('input[type="password"]').val();
        if (email && password) {
          $.ajax({
            url: "/admin/login",
            type: "POST",
            data: { email, password },
            success: function (response) {
              if (response == "success") {
                window.location.href = "/";
              } else {
                window.location.href = response;
              }
            },
            error: function () {
              alert("An error occurred. Please try again.");
            },
          });
        } else {
          alert("Please fill in all fields.");
        }
      };
      form.on("submit", loginHandler);
    </script>
    <script>
        function show()
        {
         if ($(".password").attr("type")=="password") {
         $(".password").attr("type", "text");
         document.getElementById('s_show_hide').innerHTML="<i class='fa-regular fa-eye'></i>";
         }
         else{
         $(".password").attr("type", "password");
         document.getElementById('s_show_hide').innerHTML="<i class='fa-regular fa-eye-slash'></i>";
         }
        }
    </script>
  </body>
</html>
